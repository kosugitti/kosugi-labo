---
title: "データの読み込み"
---

## CSVファイルの読み込み

研究で使うデータは、多くの場合CSVファイル（カンマ区切りテキスト）で提供されます。

### readrパッケージを使う

tidyverseに含まれる`readr`パッケージの`read_csv()`関数を使います。

```r
library(tidyverse)

# CSVファイルを読み込む
data <- read_csv("data.csv")
```

### 日本語を含むファイル

日本語を含むファイルで文字化けする場合は、エンコーディングを指定します。

```r
data <- read_csv("data.csv", locale = locale(encoding = "CP932"))
```

## データの確認

読み込んだデータを確認する方法はいくつかあります。

### head() と tail()

最初の数行、最後の数行を表示します。

```r
head(data)       # 最初の6行
head(data, 10)   # 最初の10行
tail(data)       # 最後の6行
```

### glimpse()

データの構造をコンパクトに表示します。

```r
glimpse(data)
```

### summary()

各変数の要約統計量を表示します。

```r
summary(data)
```

### View()

RStudioでスプレッドシート形式で表示します。

```r
View(data)
```

## 練習用データ

この教材では、以下のようなデータを使って練習します。

### サンプルデータの作成

```{r}
#| message: false
library(tidyverse)

# サンプルデータを作成
students <- tibble(
  id = 1:10,
  name = c("田中", "鈴木", "佐藤", "山田", "伊藤",
           "渡辺", "中村", "小林", "加藤", "吉田"),
  grade = c(3, 2, 4, 3, 2, 4, 3, 2, 4, 3),
  score = c(78, 82, 91, 65, 74, 88, 70, 95, 83, 77),
  group = c("A", "B", "A", "B", "A", "B", "A", "B", "A", "B")
)

students
```

### データの確認

```{r}
# 構造を確認
glimpse(students)
```

```{r}
# 要約統計量
summary(students)
```

## データ型

Rには主に以下のデータ型があります：

| 型 | 説明 | 例 |
|----|------|-----|
| numeric | 数値 | `1.5`, `100` |
| character | 文字列 | `"hello"`, `"田中"` |
| logical | 論理値 | `TRUE`, `FALSE` |
| factor | カテゴリ | 順序のあるカテゴリ |

```{r}
# 型の確認
class(students$score)  # 数値
class(students$name)   # 文字列
class(students$grade)  # 数値
```

## 特定の列・行を取り出す

### 列の取り出し

```{r}
# $ を使う
students$score

# [[]] を使う
students[["score"]]
```

### 行の取り出し

```{r}
# 1行目
students[1, ]

# 1〜3行目
students[1:3, ]
```

### 条件で絞り込む

```{r}
# スコアが80以上の行
students[students$score >= 80, ]
```

::: {.callout-note}
次の「tidyverse入門」では、より直感的な方法でデータを操作する方法を学びます。
:::
